@use '~scss/mixins/colors' as colors;
@use '~scss/mixins/breakpoints' as media;
@use '~scss/mixins/flexes' as flexes;
@use '~scss/mixins/fonts' as fonts;
@use '~scss/mixins/animations' as anim;
@use '~scss/mixins/elements' as elements;

@keyframes bg-move {
	from {
		background-position: 0 var(--topBgOffset, 0);
	}

	to {
		background-position: var(--bgWidth, 100%) var(--topBgOffset, 0);
	}
}

.subscribe {
	--topBgOffset: 38px;
	--bgWidth: 75px;
	background-color: var(--mainColor);
	background-image: url('~images/subscribe/subscribe_bg.png');
	background-position: 36px var(--topBgOffset);
	margin-bottom: 35px;
	z-index: 0;
	animation: bg-move 5s linear infinite;

	@include media.breakpoint(lg) {
		padding: 0 30px;
	}

	@include media.breakpoint(sm) {
		padding: 0 20px;
	}

	&__photo-image {
		position: absolute;
		display: block;
		height: calc(100% + 80px);
		max-width: 650px;
		bottom: 0;
		right: var(--horizPadding);
		z-index: -1;
		-webkit-user-select: none;
		-moz-user-select: none;
		user-select: none;

		@include media.breakpoint(xl) {
			display: none;
		}
	}

	&__container {
		position: relative;
		padding-top: 45px;
		color: #{colors.getColor('white')};
	}

	&__content {}

	&__title {
		font-size: #{ fonts.calcSize(38px) };
		line-height: 1.2em;
		font-weight: 700;
		font-family: #{ fonts.getFonts('officina-sans') };
	}

	&__description {
		--width: 45%;

		margin-top: 1em;
		width: var(--width);

		@include media.breakpoint(lg) {
			--width: 80%;

			margin-top: 2em;
		}

		@include media.breakpoint(sm) {
			--width: 100%;

			line-height: 1em;
		}
	}

	&__form {
		--default-input-width: 330px;

		padding-top: 14px;

		&-inputs-row {
			@include flexes.flexRowStart;

			@include media.breakpoint(lg) {
				@include flexes.flexColumn;
			}
		}
		&-label {
			margin-right: 25px;
			margin-top: 1em;

			&:focus-within input,
			&:focus-within button {
				@include elements.outline;
			}

			@include media.breakpoint(sm) {
				margin-right: 0;
			}
		}

		&-input {
			padding: 13px 15px;
			width: var(--default-input-width);
			height: 50px;
			border: transparent;
			border-radius: 5px;
			color: #{colors.getColor('grey')};
			font-size: 1em;

			@include media.breakpoint(sm) {
				width: 100%;
				font-size: #{ fonts.calcSize(20px) };
			}
		}

		&-email {
			width: 210px;

			@include media.breakpoint(lg) {
				width: var(--default-input-width);
			}

			@include media.breakpoint(sm) {
				width: 100%;
			}
		}

		&-submit {
			--firstColor: var(--mainColor);
			--secondColor: #{colors.getColor('white')};

			@include anim.addTransition('color, background-color');

			display: inline-block;
			font-weight: 700;
			font-size: #{ fonts.calcSize(22px) };
			min-width: 210px;
			min-height: 50px;
			background-color: var(--firstColor);
			border: 2px solid #{colors.getColor('white')};
			-webkit-border-radius: 5px;
			-moz-border-radius: 5px;
			border-radius: 5px;
			color: var(--secondColor);
			cursor: pointer;

			&:hover, &:focus {
				--firstColor: #{colors.getColor('white')};
				--secondColor: var(--mainColor);
			}

			@include media.breakpoint(lg) {
				font-size: #{ fonts.calcSize(25px) };
			}

			@include media.breakpoint(sm) {
				width: 100%;
				margin-top: 2em;
			}
		}

		&-consent {
			--checkbox-size: 20px;
			--text-offset: 20px;
			--width: 40%;

			display: block;
			position: relative;
			width: var(--width);
			padding-inline-start: calc(var(--checkbox-size) + var(--text-offset));

			@include media.breakpoint(lg) {
				--width: 100%;
			}

			@include media.breakpoint(sm) {
				--checkbox-size: 16px;
				--text-offset: 10px;

				margin-top: 2em;
				margin-bottom: 1em;
			}

			&-checkbox {
				@include elements.hide-element;

				position: absolute;
				top: 2px;
				left: 0;

				&:checked + i.custom-checkbox::after {
					opacity: 1;
					filter: none;
				}
			}

			@include media.breakpoint-revert(sm) {
				&:hover i.custom-checkbox::after {
					opacity: 1;
				}
			}

			&:focus-within i.custom-checkbox {
				@include elements.outline;
			}

			i.custom-checkbox {
				display: block;
				position: absolute;
				top: 2px;
				left: 0;
				width: var(--checkbox-size);
				height: var(--checkbox-size);
				background-color: #{colors.getColor('white')};
				border-radius: 5px;
				pointer-events: none;

				&::after {
					content: "";
					display: block;
					opacity: 0;
					position: absolute;
					top: 50%;
					left: 50%;
					width: 100%;
					height: 100%;
					transform: translate(-50%, -50%);
					background-image: url('~images/subscribe/checkmark.svg');
					background-repeat: no-repeat;
					background-position: center;
					filter: grayscale(1);
				}
			}

			&-description {
				font-size: #{ fonts.calcSize(14px) };

				@include media.breakpoint(sm) {
					display: none;
				}

				&-mobile {
					display: none;

					@include media.breakpoint(sm) {
						display: inline-block;
					}
				}
			}
		}
	}

}
